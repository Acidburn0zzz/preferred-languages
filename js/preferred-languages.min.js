(function($,settings){var $activeLocales=$(".active-locales-list"),$activeLocalesControls=$(".active-locales-controls"),$inactiveLocales=$(".inactive-locales-list"),$inactiveLocalesControls=$(".inactive-locales-controls"),$selectedLocale=$activeLocales.find('li[aria-selected="true"]'),$inputField=$('input[name="preferred_languages"]');function changeButtonState(activeLocale){$activeLocalesControls.find(".locales-move-up").attr("disabled",0===activeLocale.index());$activeLocalesControls.find(".locales-move-down").attr("disabled",activeLocale.index()===$activeLocales.children("li").length-1);$activeLocalesControls.find(".locales-remove").attr("disabled",1===$activeLocales.children("li").length)}function toggleLocale(locale){var selected=locale.attr("aria-selected"),newState=!!selected;if(true===selected){return}$selectedLocale.attr("aria-selected",false);locale.attr("aria-selected",newState);if(true===newState){$selectedLocale=locale;$activeLocales.attr("aria-activedescendant",$selectedLocale.attr("id"))}changeButtonState(locale)}function updateHiddenInput(){var locales=[];$activeLocales.children("li").each(function(){locales.push($(this).attr("id"))});$inputField.val(locales.join(","))}changeButtonState($selectedLocale);$inactiveLocalesControls.find(".locales-add").on("click",function(){var $option=$inactiveLocales.find("select option:selected"),$newLocale=$("<li/>",{id:$option.val()||"en_US",text:$option.text(),"aria-selected":false});$option.remove();$activeLocales.append($newLocale);toggleLocale($newLocale);$activeLocales.animate({scrollTop:$newLocale.offset().top-$activeLocales.offset().top+$activeLocales.scrollTop()});updateHiddenInput()});$activeLocales.on("click","li",function(){toggleLocale($(this))});$activeLocalesControls.find(".locales-move-up").on("click",function(){$selectedLocale.insertBefore($selectedLocale.prev());updateHiddenInput()});$activeLocalesControls.find(".locales-move-down").on("click",function(){$selectedLocale.insertAfter($selectedLocale.next());updateHiddenInput()});$activeLocalesControls.find(".locales-remove").on("click",function(){var $successor=$selectedLocale.prev()||$selectedLocale.next();$selectedLocale.remove();toggleLocale($successor);changeButtonState($selectedLocale);updateHiddenInput()})})(jQuery,window.preferredLanguages);